<!doctype html><html lang=en-us>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<title>Combination and Permutation（排列与组合） | wingstone's blog</title>
<link rel=stylesheet href=/css/style.css>
<link rel=stylesheet href=/css/fonts.css>
<link rel=icon href=/favicon.png>
</head>
<body>
<nav>
<ul class=menu>
<li><a href=/ class=menu-item>Home</a></li>
<li><a href=/categories/ class=menu-item>Categories</a></li>
<li><a href=/tags/ class=menu-item>Tags</a></li>
<li><a href=/archives/ class=menu-item>Archives</a></li>
<li><a href=/about/ class=menu-item>About</a></li>
<li><a href=/index.xml class=menu-item>Subscribe</a></li>
</ul>
<hr>
</nav>
<div class=article-meta>
<h2><span class=title>Combination and Permutation（排列与组合）</span></h2>
<h3 class=date>2020/09/07</h3>
</div><h2>目录</h2>
<nav id=TableOfContents>
<ul>
<li><a href=#排列与组合的区别>排列与组合的区别</a></li>
<li><a href=#排列的算法框架>排列的算法框架</a></li>
<li><a href=#组合的算法框架>组合的算法框架</a></li>
</ul>
</nav>
<main>
<p>关于排列与组合的算法问题</p>
<h2 id=排列与组合的区别>排列与组合的区别</h2>
<p>实际上，排列意味着数据一样，数据出现的顺序不一样；
组合意味着，数据不一样，与数据的顺序无关；</p>
<h2 id=排列的算法框架>排列的算法框架</h2>
<p>如果数据没有重复，直接套用回溯算法框架即可；</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-C++ data-lang=C++><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Solution</span> {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span style=color:#66d9ef>public</span><span style=color:#f92672>:</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span>    <span style=color:#66d9ef>void</span> Help(vector<span style=color:#f92672>&lt;</span>vector<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>int</span><span style=color:#f92672>&gt;&gt;&amp;</span> results, vector<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>int</span><span style=color:#f92672>&gt;&amp;</span> result, vector<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>int</span><span style=color:#f92672>&gt;&amp;</span> num, vector<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>int</span><span style=color:#f92672>&gt;&amp;</span> flags)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span>    {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span>        <span style=color:#66d9ef>if</span> (result.size() <span style=color:#f92672>==</span> num.size())
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span>        {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span>            results.push_back(result);
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span>            <span style=color:#66d9ef>return</span>;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span>        }
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span>        <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; i <span style=color:#f92672>&lt;</span> flags.size(); i<span style=color:#f92672>++</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span>        {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span>            <span style=color:#66d9ef>if</span> (flags[i] <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>)  <span style=color:#75715e>//跳过已经取过的数
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span style=color:#75715e></span>                <span style=color:#66d9ef>continue</span>;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span>            result.push_back(num[i]);
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span>            flags[i] <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span>            Help(results, result, num, flags);
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span>            flags[i] <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">22</span>            result.pop_back();
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">23</span>        }
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">24</span>    }
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">25</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">26</span>    vector<span style=color:#f92672>&lt;</span>vector<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>int</span><span style=color:#f92672>&gt;&gt;</span> permute(vector<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>int</span><span style=color:#f92672>&gt;&amp;</span> nums) {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">27</span>        vector<span style=color:#f92672>&lt;</span>vector<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>int</span><span style=color:#f92672>&gt;&gt;</span> results;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">28</span>        vector<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>int</span><span style=color:#f92672>&gt;</span> result;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">29</span>        vector<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>int</span><span style=color:#f92672>&gt;</span> flags(nums.size(), <span style=color:#ae81ff>1</span>);;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">30</span>        Help(results, result, nums, flags);
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">31</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">32</span>        <span style=color:#66d9ef>return</span> results;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">33</span>    }
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">34</span>};
</code></pre></div><p>对于特殊情况，比如数据中有重复的数据，需要考虑重复的情况；为了方便识别重复的情况，需要对数据源进行排序，这样在计算过程中，对于重复的情况，只需要向前单向查找是否重复即可；</p>
<h2 id=组合的算法框架>组合的算法框架</h2>
<p>如果直接套用回溯框架，就会导致重复问题，因为组合与顺序无关，先选跟后选可能会产生同一组数据；</p>
<p>解决办法：在回溯的过程中，只向后查找，而不向当前节点的前面查找，这样就不会产生重复的组合；</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Solution</span> {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span style=color:#66d9ef>public</span><span style=color:#f92672>:</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span>    <span style=color:#66d9ef>void</span> FindAll(vector<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>int</span><span style=color:#f92672>&gt;&amp;</span> candidates, vector<span style=color:#f92672>&lt;</span>vector<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>int</span><span style=color:#f92672>&gt;&gt;&amp;</span> results, vector<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>int</span><span style=color:#f92672>&gt;</span> <span style=color:#f92672>&amp;</span>result, <span style=color:#66d9ef>int</span> <span style=color:#f92672>&amp;</span>current, <span style=color:#66d9ef>int</span> <span style=color:#f92672>&amp;</span>target, <span style=color:#66d9ef>int</span> id)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span>    {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span>        <span style=color:#66d9ef>if</span> (current <span style=color:#f92672>==</span> target)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span>        {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span>            results.push_back(result);
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span>            <span style=color:#66d9ef>return</span>;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span>        }
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span>        <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> id; i <span style=color:#f92672>&lt;</span> candidates.size(); i<span style=color:#f92672>++</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span>        {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span>            <span style=color:#66d9ef>if</span> (candidates[i]  <span style=color:#f92672>&lt;=</span> target <span style=color:#f92672>-</span> current )
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span>            {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span>                result.push_back(candidates[i]);
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span>                current <span style=color:#f92672>+=</span> candidates[i];
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span>                FindAll(candidates, results, result, current, target, i);
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span>                current <span style=color:#f92672>-=</span> candidates[i];
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span>                result.pop_back();
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span>            }
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">22</span>            <span style=color:#66d9ef>else</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">23</span>            {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">24</span>                <span style=color:#66d9ef>break</span>;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">25</span>            }
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">26</span>        }
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">27</span>    }
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">28</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">29</span>    vector<span style=color:#f92672>&lt;</span>vector<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>int</span><span style=color:#f92672>&gt;&gt;</span> combinationSum(vector<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>int</span><span style=color:#f92672>&gt;&amp;</span> candidates, <span style=color:#66d9ef>int</span> target) {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">30</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">31</span>        vector<span style=color:#f92672>&lt;</span>vector<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>int</span><span style=color:#f92672>&gt;&gt;</span> results;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">32</span>        vector<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>int</span><span style=color:#f92672>&gt;</span> result;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">33</span>        <span style=color:#66d9ef>int</span> current <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">34</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">35</span>        FindAll(candidates, results, result, current, target, <span style=color:#ae81ff>0</span>);
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">36</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">37</span>        <span style=color:#66d9ef>return</span> results;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">38</span>    }
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">39</span>};
</code></pre></div><p>同样对于数据中有重复的数据，需要考虑重复的情况；需要对数据源进行排序，在计算过程中，对于重复的情况，只需要向前单向查找是否重复即可；</p>
</main>
<div id=gitalk-container></div>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css>
<script src=https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js></script>
<script>const gitalk=new Gitalk({clientID:'6ac25831f8084638e036',clientSecret:'ba798581fc341f62243d29d9be3d56d58cb38b74',repo:'wingstone.github.io',owner:'wingstone',admin:['wingstone'],id:decodeURI(location.pathname),distractionFreeMode:!1});(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('gitalk-container').innerHTML='Gitalk comments not available by default when the website is previewed locally.';return}gitalk.render('gitalk-container')})()</script>
<footer>
<script defer src=//yihui.org/js/math-code.js></script>
<script defer src="//mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script defer src=//yihui.org/js/center-img.js></script>
</footer>
</body>
</html>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 8" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>